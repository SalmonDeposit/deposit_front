<div class="header-actions">
  <h1>Votre coffre</h1>
</div>
<ng-container *ngIf="!isLoading && documents; else loading">
  <div>
    <button  (click)="addDocumentModal = true" class=" add-button btn btn-secondary">
      <fa-icon class="icon" size="2x" [icon]="plus"> </fa-icon>
      Ajouter un document
    </button>
    <button  (click)="addFolderModal = true" class=" add-button btn btn-secondary">
      <fa-icon class="icon" size="2x" [icon]="plus"> </fa-icon>
      Ajouter un dossier
    </button>
  </div>
  <table class="table">
    <thead>
    <tr>
      <th> Date de création</th>
      <th> Nom </th>
      <th> Type </th>
      <th> Taille </th>
      <th> Action</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let folder of folders">
      <td> {{folder.createdAt | date:'dd.MM.YYYY'}}</td>
      <td> {{folder.name}}</td>
      <td> {{folder.type}}</td>
      <td> 7.86 ko</td>
      <td class="actions-buttons">
        <button (click)="goToDetails(folder.id, 'folder')" class="btn btn-secondary">
          <fa-icon  class="icon" [icon]="file"></fa-icon>
        </button>
        <button (click)="onDelete(folder.id)" class="btn btn-danger">
          <fa-icon class="icon" [icon]="trash"></fa-icon>
        </button>
      </td>
    </tr>
    <tr *ngFor="let document of documents">
      <td> {{document.createdAt | date:'dd.MM.YYYY'}}</td>
      <td> {{document.name}}</td>
      <td> {{document.type}}</td>
      <td> 7.86 ko</td>
      <td class="actions-buttons">
        <button (click)="goToDetails(document.id, 'file')" class="btn btn-secondary">
          <fa-icon  class="icon" [icon]="file"></fa-icon>
        </button>
        <button (click)="onDelete(document.id)" class="btn btn-danger">
          <fa-icon class="icon" [icon]="trash"></fa-icon>
        </button>
      </td>
    </tr>
    </tbody>
  </table>
  <app-deposit-delete-modal title="Supprimer l'element"
                            [objectId]="currentDeleteDocumentId"
                            [isOpen]="deleteModal"
                            (isOpenChange)="deleteModal = $event"
                            [service]="service">
  </app-deposit-delete-modal>
</ng-container>
<app-deposit-upload-file
  [service]="service"
  [title]="'Ajouter un document'"
  [filename]="'document'"
  [isOpen]="addDocumentModal"
  (isOpenChange)="addDocumentModal = $event"
/>
<app-deposit-editor-modal
[service]="folderService"
[title]="'Créer un nouveau dossier'"
[isOpen]="addFolderModal"
(isOpenChange)="addFolderModal = $event"
[formBuilder]="folderFormBuilder"
></app-deposit-editor-modal>
<ng-template #loading>
  <div class="loading-container">
    <span class="spinner"></span>
  </div>
</ng-template>
